# スライスの学習ポイント

### スライスの length と cap

len() は配列やスライスの長さ(length)、cap() は容量(capacity)を求めます。長さは実際に使用されている数、容量はメモリ上に確保されている数です。容量を超えると、倍の容量のメモリが別に確保され、既存データがコピーされます。

### スライスの[x:y]指定はなぜ半開区間である x<=index<y なのか

Go 言語においてスライスを作成する際の表記 primes[1:4] でのインデックスの指定は半開区間（1 以上 4 未満）を意味します。このような設計が採用された理由は、主に以下の通り。

1. オフバイワンエラー（Off-by-one Errors）の防止：半開区間を使用することで、オフバイワンエラー（特にループの境界条件に関連するエラー）の発生を減らすことができます。これはプログラミングにおいて一般的な誤りの一つで、この設計はそれを減らすのに役立ちます。

2. 数学的な直感性：半開区間は数学的な扱いが容易で、特に連続する区間を扱う際に直感的です。例えば、0:10 と 10:20 のような区間は、重複する要素なしにスムーズに連結できます。

### 半開区間の利点

半開区間（開始インデックスは含み、終了インデックスは含まない）を使用すると、オフバイワンエラーを防ぐのに役立ちます。これにはいくつかの理由があります。

1. 明確な境界設定：例えば、配列 arr の全要素にアクセスする際、for i := 0; i < len(arr); i++ というループは非常に明確です。i は 0（配列の最初の要素）から開始し、len(arr)（配列の長さ）未満の間だけループします。これにより、配列の最後の要素（インデックス len(arr) - 1）にアクセスし、配列の範囲外へのアクセスを避けます。終了条件が i < len(arr) と非常に直観的であるため、終了インデックスを誤って一つ多く設定するようなオフバイワンエラーが起きにくくなります。

2. 区間の長さの直感的理解：半開区間の場合、区間 [low, high) の長さは単純に high - low となります。これは数学的にも直感的で、プログラミングにおいてもシンプルです。このため、区間の長さを計算する際の混乱が減り、オフバイワンエラーの発生リスクが低下します。

3. 連続する区間の容易な処理：たとえば、ある配列 arr があり、その連続する二つの部分を処理する場合（arr[0:n] と arr[n:end]）、半開区間を使うと、これらの区間は重複する要素なく連続します。これにより、区間の境界に関するエラーが減少します。
